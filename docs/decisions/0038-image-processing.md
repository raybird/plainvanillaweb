# ADR 0038: 原生影像處理服務 (Native Image Processing Service)

## 上下文
在現代 Web 應用中，處理使用者上傳的圖片（如頭像裁剪、套用濾鏡）是常見需求。傳統上這可能需要昂貴的後端處理或重型的 JS 影像庫（如 CamanJS）。

## 決策
實作基於 **Canvas API** 的 `ImageService`：
1.  **純前端濾鏡**: 利用 `getImageData` 獲取像素數據，並透過像素級迴圈實作灰階 (Grayscale) 轉換邏輯。
2.  **非同步處理**: 使用 Promise 封裝 `Image.onload` 流程，確保影像處理不會阻塞主執行緒。
3.  **資源輕量化**: 整個服務僅需幾十行代碼，即可達成基礎的影像處理功能，體現 Vanilla 精神。
4.  **UI 整合**: 在個人資料頁面提供濾鏡預覽按鈕，讓使用者在儲存前即可看到效果。

## 後果
- **優點**: 極大減少了對後端處理的依賴，節省伺服器資源。
- **優點**: 提供即時的視覺反饋，提升互動體驗。
- **優點**: 展示了瀏覽器在圖形處理方面的強大潛力。
- **缺點**: 對於超大型圖片或複雜濾鏡，Canvas 操作可能會對低端設備的性能造成壓力。
