# ADR 0051: SDK 導向的分發策略 (SDK-Oriented Distribution)

## 上下文
目前 `plainvanillaweb` 是一個應用程式範本，所有的功能服務（Services）都被設計為在該範本內部運行。然而，隨著功能日益強大（如 Crypto, Compression, WebRTC），這些服務具備了獨立運行的價值。開發者可能只想使用我們的「加密模組」或「P2P 模組」，而不想下載整個專案。

## 決策
1.  **模組純化**: 確保 `lib/` 中的核心服務模組不依賴於應用程式內部的特定 DOM 結構或全域狀態。所有的相依性應透過建構子注入或參數傳遞。
2.  **統一入口 (Barrel Export)**: 實作 `lib/vanilla-sdk.js`，將所有高效能、具備高重用價值的服務進行聚合導出，方便外部透過 `import { cryptoService } from '.../lib/vanilla-sdk.js'` 引用。
3.  **CDN 友好化**: 確保模組可以直接在瀏覽器中透過 URL `import` 運行（例如使用 GitHub Pages 作為 CDN 來源）。

## 後果
- **優點**: 專案從一個「範本」進化為「工具庫」，影響力從「展示」提升至「生產力」。
- **優點**: 展示了原生 ESM 模組系統在建立跨專案工具鏈時的極致效率。
- **缺點**: 需要更嚴格地管理模組間的耦合度，增加了核心模組的維護心智開銷。
- **缺點**: 外部引用可能面臨 CORS 政策限制（需確保部署伺服器正確配置）。
