# ADR 0080: 檔案系統存取實驗室整合

## 狀態

已接受 (Accepted)

## 背景

`plainvanillaweb` 已在 `lib/file-system-service.js` 中實作了 File System Access API 的基礎封裝。這是一個強大的原生 API，允許網頁應用程式在取得使用者授權後，直接讀取與寫入本地檔案系統中的檔案與目錄。這打破了網頁與本地硬碟之間的隔閡，是開發網頁版 IDE 或編輯器的核心技術。

## 決策

建立一個專屬的檔案系統實驗室頁面，展示目錄管理與檔案讀寫。

1.  **實作目標**：建立 `FileSystemPage.js`，實作「開啟目錄」、「列表顯示」與「檔案內容預覽/編輯」流程。
2.  **安全提示**：由於此 API 具有高度敏感性，必須在 Secure Context (HTTPS) 下執行，且所有操作必須由使用者手動觸發。
3.  **UI 互動**：
    - 提供「選擇目錄」按鈕。
    - 以列表形式顯示目錄下的檔案名稱與類型。
    - 點擊檔案可將內容載入至編輯區，並支援「儲存回本地」的功能。
4.  **三位一體同步**：確保該頁面能透過 `#/lab/file-system` 直接存取，並與 `file-system-access.md` 技術手冊建立雙向連結。

## 後果

- **優點**：向開發者展示 Vanilla 應用具備處理本地複雜資料結構的能力，提升專案的實戰示範價值。
- **缺點**：目前 Safari 對於 `showDirectoryPicker` 的支援仍不完整，需提供相容性降級說明。
